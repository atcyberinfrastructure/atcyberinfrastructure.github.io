$(function () {
  if ($(".aemformV2").length > 0) {
    if ($(".aemformV2").closest(".modal-right-col").length > 0) {
      $(".aemformV2").closest(".modal-right-col").removeClass("no-form");
    }
    if ($(".aemformV2").closest(".modal-left-col").length > 0) {
      $(".aemformV2").closest(".modal-left-col").removeClass("no-form");
    }
    if ($(".aemformV2").closest(".modal-one-col").length > 0) {
      $(".aemformV2").closest(".modal-one-col").removeClass("no-form");
    }
    // Thank you Message Alignment
    // Select the node that will be observed for mutations
    const targetNode = document.querySelector(
      ".cmp-cta__modal .aemformcontainer"
    );
	
	if ($(targetNode).length > 0) {

    // Options for the observer (which mutations to observe)
    const config = { attributes: true, childList: true, subtree: true };

    // Callback function to execute when mutations are observed
    const callback = (mutationList, observer) => {
      for (const mutation of mutationList) {
        if (mutation.type === "childList") {
          let _thankElem = $(".tyMessage");
          if (_thankElem.length > 0) {
            $(_thankElem)
              .parents()
              .find(".no-form")
              .next()
              .addClass("aem-GridColumn--default--12") &&
              $(_thankElem).parents().find(".no-form").remove() &&
              $(_thankElem)
                .parents(".cmp-cta__modal")
                .removeClass("modal-lg")
                .removeClass("cmp-modal__two-column");
              $(_thankElem)
                .parents(".cmp-modal__body")
                .find(".title-v2, .text-v2")
                .remove();
          }
        }
      }
    };

    // Create an observer instance linked to the callback function
    const observer = new MutationObserver(callback);

    // Start observing the target node for configured mutations
    observer.observe(targetNode, config);
   }
  }
});

(function($) {
    "use strict";

    function updateLayoutClasses(id) {
		var onecolumn = $(id).find(".modal-one-col").length;
        var rightcolumn = $(id).find(".modal-right-col").length;
        var leftcolumn = $(id).find(".modal-right-col").length;
        var formexists = $(id).find(".no-form").length;//removes no-form class to div where form in not authored
        if(onecolumn>0){
            if(formexists < 1){
                //console.log("one col form is authored");
            }else{
                //console.log("one col form is not authored");
                $(id).addClass("cmp-modal__no-form");		
            }
        }

        if(rightcolumn >0 && leftcolumn>0 ){
            if(formexists < 2){
				$(id).addClass("cmp-modal__two-column modal-lg");

            }else{
			  $(id).addClass("cmp-modal__two-column");
			  $(id).addClass("cmp-modal__no-form");	
              $(id).find(".modal-left-col").removeClass("aem-GridColumn--default--6");
              $(id).find(".modal-left-col").addClass("aem-GridColumn--default--3");

              $(id).find(".modal-right-col").removeClass("aem-GridColumn--default--6");
              $(id).find(".modal-right-col").addClass("aem-GridColumn--default--9");
            }

        }


    }

    $(document).on("click", ".cmp-cta__button-container", function(e) {
   	    e.stopPropagation();
        var modalid = $(e.target).closest(".button-container").parent().attr("data-bs-target");
    	updateLayoutClasses(modalid);
    });

   $(document).on("click", ".button-container", function(e) {
        e.stopPropagation();
        var modalid = $(e.target).parent().attr("data-bs-target"); //button
       if(modalid == undefined){
           modalid = $(e.target).parent().parent().attr("data-bs-target"); //cta
       }
       updateLayoutClasses(modalid);
    });

})(jQuery);


(function ($, Granite, ns, $document) {
  "use strict";
  function toggleCobrandingModalFieldsmodel(checkbox, modalCobranding, type) {
    if (checkbox) {
      if (checkbox.checked) {
        modalCobranding.removeClass('hide');
      } else {
        modalCobranding.addClass('hide');

      }

    }
  }

  $document.on("dialog-ready", function() {
    var cobrandingField = $(this).find(".checkbox-showhide-cobranding-modal");
    if(null!=cobrandingField)
    {
      for(var i=0;i<cobrandingField.length;i++)
      {
        var cobrandingFieldItem= cobrandingField[i];
        var multifieldUnit = $(cobrandingFieldItem).parent();
        var modalCobranding = $(multifieldUnit).siblings(".showhide-container-cobranding-modal");
        if(null!=modalCobranding){
          toggleCobrandingModalFieldsmodel(cobrandingFieldItem,modalCobranding,"defaultShow");
        }
      }
    }

  });

  $document.on("foundation-contentloaded", function (e) {

    $(".checkbox-showhide-cobranding-modal").change(function () {
      var multifieldUnit = $(this).parent();
      var modalCobranding= $(multifieldUnit).siblings(".showhide-container-cobranding-modal");
      if(null!=modalCobranding){
        toggleCobrandingModalFieldsmodel(this,modalCobranding,"defaultShow");
      }
    });
  });

}(jQuery, Granite, Granite.author, jQuery(document)));